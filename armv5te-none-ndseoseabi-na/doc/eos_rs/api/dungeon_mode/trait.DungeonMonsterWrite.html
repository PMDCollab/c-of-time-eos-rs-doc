<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for [`DungeonMonsterMut`] (write operations)."><meta name="keywords" content="rust, rustlang, rust-lang, DungeonMonsterWrite"><title>DungeonMonsterWrite in eos_rs::api::dungeon_mode - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-bfda650e0f1b8d97.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-73ec76ce6fb6d670.css"><link rel="stylesheet" disabled href="../../../static.files/dark-505cdfdf9d48c666.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-de5a1c2641418e5f.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-2da75ee0e1909b3a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../eos_rs/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../eos_rs/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">DungeonMonsterWrite</a></h2><div class="sidebar-elems"><section><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.ai_consider_move">ai_consider_move</a></li><li><a href="#method.ai_movement">ai_movement</a></li><li><a href="#method.calc_speed_stage">calc_speed_stage</a></li><li><a href="#method.calculate_ai_target_pos">calculate_ai_target_pos</a></li><li><a href="#method.choose_ai_move">choose_ai_move</a></li><li><a href="#method.clear_monster_action_fields">clear_monster_action_fields</a></li><li><a href="#method.evolve">evolve</a></li><li><a href="#method.evolve_this_enemy_if_should">evolve_this_enemy_if_should</a></li><li><a href="#method.execute_action">execute_action</a></li><li><a href="#method.restore_pp_for_all_moves_set_flags">restore_pp_for_all_moves_set_flags</a></li><li><a href="#method.run_ai">run_ai</a></li><li><a href="#method.set_action_pass_turn_or_walk">set_action_pass_turn_or_walk</a></li><li><a href="#method.set_action_regular_attack">set_action_regular_attack</a></li><li><a href="#method.set_action_use_move_ai">set_action_use_move_ai</a></li><li><a href="#method.set_action_use_move_ai_unchecked">set_action_use_move_ai_unchecked</a></li><li><a href="#method.set_monster_action_fields">set_monster_action_fields</a></li><li><a href="#method.set_reflect_damage_countdown_to_four">set_reflect_damage_countdown_to_four</a></li><li><a href="#method.try_activate_truant">try_activate_truant</a></li><li><a href="#method.try_add_target_to_ai_target_list">try_add_target_to_ai_target_list</a></li><li><a href="#method.try_weather_form_change">try_weather_form_change</a></li><li><a href="#method.update_ai_target_pos">update_ai_target_pos</a></li><li><a href="#method.update_move_pp">update_move_pp</a></li><li><a href="#method.update_status_icon_flags">update_status_icon_flags</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In eos_rs::api::dungeon_mode</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="../../index.html">eos_rs</a>::<wbr><a href="../index.html">api</a>::<wbr><a href="index.html">dungeon_mode</a>::<wbr><a class="trait" href="#">DungeonMonsterWrite</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#673-929">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait DungeonMonsterWrite: Sealed {
<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 23 methods</span></summary>    fn <a href="#method.update_move_pp" class="fnname">update_move_pp</a>(&amp;mut self, should_consume_pp: bool) { ... }
<span class="item-spacer"></span>    fn <a href="#method.try_activate_truant" class="fnname">try_activate_truant</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.try_weather_form_change" class="fnname">try_weather_form_change</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.restore_pp_for_all_moves_set_flags" class="fnname">restore_pp_for_all_moves_set_flags</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.evolve_this_enemy_if_should" class="fnname">evolve_this_enemy_if_should</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    unsafe fn <a href="#method.evolve" class="fnname">evolve</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param_2: &amp;mut <a class="type" href="../../ffi/type.undefined4.html" title="type eos_rs::ffi::undefined4">undefined4</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_monster_idx: <a class="type" href="../monsters/type.MonsterSpeciesId.html" title="type eos_rs::api::monsters::MonsterSpeciesId">MonsterSpeciesId</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.calc_speed_stage" class="fnname">calc_speed_stage</a>(&amp;mut self, counter_weight: i32) -&gt; i32 { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_reflect_damage_countdown_to_four" class="fnname">set_reflect_damage_countdown_to_four</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.execute_action" class="fnname">execute_action</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.ai_movement" class="fnname">ai_movement</a>(&amp;mut self, param: <a class="type" href="../../ffi/type.undefined.html" title="type eos_rs::ffi::undefined">undefined</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.calculate_ai_target_pos" class="fnname">calculate_ai_target_pos</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.choose_ai_move" class="fnname">choose_ai_move</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.clear_monster_action_fields" class="fnname">clear_monster_action_fields</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_monster_action_fields" class="fnname">set_monster_action_fields</a>(&amp;mut self, action_id: <a class="type" href="../../ffi/action/type.Type.html" title="type eos_rs::ffi::action::Type">Type</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_action_pass_turn_or_walk" class="fnname">set_action_pass_turn_or_walk</a>(&amp;mut self, monster_id: <a class="type" href="../monsters/type.MonsterSpeciesId.html" title="type eos_rs::api::monsters::MonsterSpeciesId">MonsterSpeciesId</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_action_regular_attack" class="fnname">set_action_regular_attack</a>(&amp;mut self, direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a>) { ... }
<span class="item-spacer"></span>    unsafe fn <a href="#method.set_action_use_move_ai_unchecked" class="fnname">set_action_use_move_ai_unchecked</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_index: u8,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_action_use_move_ai" class="fnname">set_action_use_move_ai</a>(&amp;mut self, move_index: u8, direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.update_ai_target_pos" class="fnname">update_ai_target_pos</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    unsafe fn <a href="#method.run_ai" class="fnname">run_ai</a>(&amp;mut self, param: <a class="type" href="../../ffi/type.undefined.html" title="type eos_rs::ffi::undefined">undefined</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.ai_consider_move" class="fnname">ai_consider_move</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ai_possible_move: &amp;mut <a class="struct" href="../../ffi/struct.ai_possible_move.html" title="struct eos_rs::ffi::ai_possible_move">ai_possible_move</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the_move: &amp;<a class="type" href="../moves/type.Move.html" title="type eos_rs::api::moves::Move">Move</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; i32 { ... }
<span class="item-spacer"></span>    unsafe fn <a href="#method.try_add_target_to_ai_target_list" class="fnname">try_add_target_to_ai_target_list</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_num_targets: i32,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_ai_range: <a class="struct" href="../moves/struct.MoveTargetAndRange.html" title="struct eos_rs::api::moves::MoveTargetAndRange">MoveTargetAndRange</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target: &amp;<a class="type" href="type.DungeonEntity.html" title="type eos_rs::api::dungeon_mode::DungeonEntity">DungeonEntity</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the_move: &amp;<a class="type" href="../moves/type.Move.html" title="type eos_rs::api::moves::Move">Move</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_all_conditions: bool<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; i32 { ... }
<span class="item-spacer"></span>    fn <a href="#method.update_status_icon_flags" class="fnname">update_status_icon_flags</a>(&amp;mut self) { ... }
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for <a href="struct.DungeonMonsterMut.html" title="DungeonMonsterMut"><code>DungeonMonsterMut</code></a> (write operations).</p>
<p>You may find more operations in <a href="struct.DungeonEffectsEmitter.html" title="DungeonEffectsEmitter"><code>DungeonEffectsEmitter</code></a>.</p>
<h2 id="important-safety-note"><a href="#important-safety-note">Important safety note</a></h2>
<p>Please see the safety note of <a href="type.DungeonEntity.html" title="DungeonEntity"><code>DungeonEntity</code></a>. It also applies to this trait.</p>
</div></details><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.update_move_pp" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#680-682">source</a><h4 class="code-header">fn <a href="#method.update_move_pp" class="fnname">update_move_pp</a>(&amp;mut self, should_consume_pp: bool)</h4></section></summary><div class="docblock"><p>Updates the PP of any moves that were used the a monster, if PP should be consumed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_activate_truant" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#686-688">source</a><h4 class="code-header">fn <a href="#method.try_activate_truant" class="fnname">try_activate_truant</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Checks if the monster has the ability Truant, and if so tries to apply the pause status
to it.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_weather_form_change" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#693-695">source</a><h4 class="code-header">fn <a href="#method.try_weather_form_change" class="fnname">try_weather_form_change</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Tries to change a monster into one of its weather-related alternative forms.</p>
<p>Applies to Castform and Cherrim, and checks for their unique abilities.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.restore_pp_for_all_moves_set_flags" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#702-704">source</a><h4 class="code-header">fn <a href="#method.restore_pp_for_all_moves_set_flags" class="fnname">restore_pp_for_all_moves_set_flags</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Restores PP for all moves, clears flags <a href="../../ffi/struct.move_.html#method.f_consume_2_pp" title="Move::f_consume_2_pp"><code>Move::f_consume_2_pp</code></a>,
<a href="../../ffi/struct.move_.html#method.flags2_unk5" title="Move::flags2_unk5"><code>Move::flags2_unk5</code></a> and <a href="../../ffi/struct.move_.html#method.flags2_unk7" title="Move::flags2_unk7"><code>Move::flags2_unk7</code></a>, and sets flag
<a href="../../ffi/struct.move_.html#method.f_consume_pp" title="Move::f_consume_pp"><code>Move::f_consume_pp</code></a>.</p>
<p>Called when a monster is revived.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.evolve_this_enemy_if_should" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#708-710">source</a><h4 class="code-header">fn <a href="#method.evolve_this_enemy_if_should" class="fnname">evolve_this_enemy_if_should</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Checks if the specified enemy should evolve because it just defeated an ally, and if so,
attempts to evolve it.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.evolve" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#716-718">source</a><h4 class="code-header">unsafe fn <a href="#method.evolve" class="fnname">evolve</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;param_2: &amp;mut <a class="type" href="../../ffi/type.undefined4.html" title="type eos_rs::ffi::undefined4">undefined4</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;new_monster_idx: <a class="type" href="../monsters/type.MonsterSpeciesId.html" title="type eos_rs::api::monsters::MonsterSpeciesId">MonsterSpeciesId</a><br>)</h4></section></summary><div class="docblock"><p>Makes the specified monster evolve into the specified species.</p>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>The caller must make sure the undefined params are valid for this function.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.calc_speed_stage" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#728-730">source</a><h4 class="code-header">fn <a href="#method.calc_speed_stage" class="fnname">calc_speed_stage</a>(&amp;mut self, counter_weight: i32) -&gt; i32</h4></section></summary><div class="docblock"><p>Calculates the speed stage of a monster from its speed up/down counters. The second
parameter is the weight of each counter (how many stages it will add/remove), but appears
to be always 1.</p>
<p>Takes modifiers into account (paralysis, snowy weather, Time Tripper). Deoxys-speed,
Shaymin-sky and enemy Kecleon during a thief alert get a flat +1 always.</p>
<p>The calculated speed stage is both returned and saved in the monster’s statuses struct.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_reflect_damage_countdown_to_four" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#733-735">source</a><h4 class="code-header">fn <a href="#method.set_reflect_damage_countdown_to_four" class="fnname">set_reflect_damage_countdown_to_four</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Sets the monster’s reflect damage countdown to 4.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.execute_action" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#742-744">source</a><h4 class="code-header">fn <a href="#method.execute_action" class="fnname">execute_action</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Executes the set action for the specified monster.</p>
<p>Used for both AI actions and player-inputted actions. If the action is not ACTION_NOTHING,
ACTION_PASS_TURN, ACTION_WALK or ACTION_UNK_4, the monster’s already_acted field is set to
true.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.ai_movement" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#750-752">source</a><h4 class="code-header">fn <a href="#method.ai_movement" class="fnname">ai_movement</a>(&amp;mut self, param: <a class="type" href="../../ffi/type.undefined.html" title="type eos_rs::ffi::undefined">undefined</a>)</h4></section></summary><div class="docblock"><p>Used by the AI to determine the direction in which a monster should move.</p>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>The caller must make sure the undefined params are valid for this function.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.calculate_ai_target_pos" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#756-758">source</a><h4 class="code-header">fn <a href="#method.calculate_ai_target_pos" class="fnname">calculate_ai_target_pos</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Calculates the target position of an AI-controlled monster and stores it in
the monster’s <a href="../../ffi/struct.monster.html#structfield.ai_target_pos" title="ffi::monster::ai_target_pos"><code>ffi::monster::ai_target_pos</code></a> field.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.choose_ai_move" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#761-763">source</a><h4 class="code-header">fn <a href="#method.choose_ai_move" class="fnname">choose_ai_move</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Determines if an AI-controlled monster will use a move and which one it will use.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clear_monster_action_fields" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#768-774">source</a><h4 class="code-header">fn <a href="#method.clear_monster_action_fields" class="fnname">clear_monster_action_fields</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Clears the fields related to AI in the monster’s data struct, setting them all to 0.
Specifically, <a href="../../ffi/struct.monster.html#structfield.action_id" title="ffi::monster::action_id"><code>ffi::monster::action_id</code></a>, <a href="../../ffi/struct.monster.html#structfield.action_use_idx" title="ffi::monster::action_use_idx"><code>ffi::monster::action_use_idx</code></a>
and <a href="../../ffi/struct.monster.html#structfield.field_0x54" title="ffi::monster::field_0x54"><code>ffi::monster::field_0x54</code></a> are cleared.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_monster_action_fields" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#780-790">source</a><h4 class="code-header">fn <a href="#method.set_monster_action_fields" class="fnname">set_monster_action_fields</a>(&amp;mut self, action_id: <a class="type" href="../../ffi/action/type.Type.html" title="type eos_rs::ffi::action::Type">Type</a>)</h4></section></summary><div class="docblock"><p>Sets some the fields related to AI in the monster’s data struct.
Specifically, <a href="../../ffi/struct.monster.html#structfield.action_id" title="ffi::monster::action_id"><code>ffi::monster::action_id</code></a>, <a href="../../ffi/struct.monster.html#structfield.action_use_idx" title="ffi::monster::action_use_idx"><code>ffi::monster::action_use_idx</code></a>
and <a href="../../ffi/struct.monster.html#structfield.field_0x54" title="ffi::monster::field_0x54"><code>ffi::monster::field_0x54</code></a>.
The last 2 are always set to 0.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_action_pass_turn_or_walk" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#795-802">source</a><h4 class="code-header">fn <a href="#method.set_action_pass_turn_or_walk" class="fnname">set_action_pass_turn_or_walk</a>(&amp;mut self, monster_id: <a class="type" href="../monsters/type.MonsterSpeciesId.html" title="type eos_rs::api::monsters::MonsterSpeciesId">MonsterSpeciesId</a>)</h4></section></summary><div class="docblock"><p>Sets a monster’s action to <a href="../../ffi/action/constant.ACTION_PASS_TURN.html" title="ffi::action::ACTION_PASS_TURN"><code>ffi::action::ACTION_PASS_TURN</code></a> or
<a href="../../ffi/action/constant.ACTION_WALK.html" title="ffi::action::ACTION_WALK"><code>ffi::action::ACTION_WALK</code></a>, depending on the result of
<a href="../../ffi/struct.monster_id.html#method.get_can_move_flag" title="MonsterSpeciesId::get_can_move_flag"><code>MonsterSpeciesId::get_can_move_flag</code></a> for the monster’s ID.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_action_regular_attack" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#806-813">source</a><h4 class="code-header">fn <a href="#method.set_action_regular_attack" class="fnname">set_action_regular_attack</a>(&amp;mut self, direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a>)</h4></section></summary><div class="docblock"><p>Sets a monster’s action to <a href="../../ffi/action/constant.ACTION_REGULAR_ATTACK.html" title="ffi::action::ACTION_REGULAR_ATTACK"><code>ffi::action::ACTION_REGULAR_ATTACK</code></a>,
with a specified direction.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_action_use_move_ai_unchecked" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#820-826">source</a><h4 class="code-header">unsafe fn <a href="#method.set_action_use_move_ai_unchecked" class="fnname">set_action_use_move_ai_unchecked</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;move_index: u8,<br>&nbsp;&nbsp;&nbsp;&nbsp;direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a><br>)</h4></section></summary><div class="docblock"><p>Sets a monster’s action to <a href="../../ffi/action/constant.ACTION_USE_MOVE_AI.html" title="ffi::action::ACTION_USE_MOVE_AI"><code>ffi::action::ACTION_USE_MOVE_AI</code></a>, with a specified direction and
move index.</p>
<h5 id="safety-2"><a href="#safety-2">Safety</a></h5>
<p>The caller must make sure the move index is not out of bounds (normally 0-3).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_action_use_move_ai" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#832-838">source</a><h4 class="code-header">fn <a href="#method.set_action_use_move_ai" class="fnname">set_action_use_move_ai</a>(&amp;mut self, move_index: u8, direction: <a class="enum" href="../enums/enum.Direction.html" title="enum eos_rs::api::enums::Direction">Direction</a>)</h4></section></summary><div class="docblock"><p>Sets a monster’s action to <a href="../../ffi/action/constant.ACTION_USE_MOVE_AI.html" title="ffi::action::ACTION_USE_MOVE_AI"><code>ffi::action::ACTION_USE_MOVE_AI</code></a>, with a specified direction and
move index.</p>
<p>Panics if the move index is out of bounds (&gt; 3).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.update_ai_target_pos" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#842-844">source</a><h4 class="code-header">fn <a href="#method.update_ai_target_pos" class="fnname">update_ai_target_pos</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Updates t monster’s <a href="../../ffi/struct.monster.html#structfield.target_pos" title="ffi::monster::target_pos"><code>ffi::monster::target_pos</code></a> field based on its current position and
the direction in which it plans to attack.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_ai" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#851-853">source</a><h4 class="code-header">unsafe fn <a href="#method.run_ai" class="fnname">run_ai</a>(&amp;mut self, param: <a class="type" href="../../ffi/type.undefined.html" title="type eos_rs::ffi::undefined">undefined</a>)</h4></section></summary><div class="docblock"><p>Runs the AI for a single monster to determine whether the monster can act and which action
it should perform if so.</p>
<h5 id="safety-3"><a href="#safety-3">Safety</a></h5>
<p>The caller must make sure the undefined params are valid for this function.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.ai_consider_move" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#866-878">source</a><h4 class="code-header">fn <a href="#method.ai_consider_move" class="fnname">ai_consider_move</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;ai_possible_move: &amp;mut <a class="struct" href="../../ffi/struct.ai_possible_move.html" title="struct eos_rs::ffi::ai_possible_move">ai_possible_move</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;the_move: &amp;<a class="type" href="../moves/type.Move.html" title="type eos_rs::api::moves::Move">Move</a><br>) -&gt; i32</h4></section></summary><div class="docblock"><p>The AI uses this function to check if a move has any potential targets, to calculate the
list of potential targets and to calculate the move’s special weight.
This weight will be higher if the monster has weak-type picker and the target is weak to the
move (allies only, enemies always get a result of 1 even if the move is super effective).
More things could affect the result.
This function also sets the flag can_be_used on the ai_possible_move struct if it makes
sense to use it.
More research is needed. There’s more documentation about this special weight. Does all the
documented behavior happen in this function?</p>
<p>Returns the move’s calculated weight</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_add_target_to_ai_target_list" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#896-913">source</a><h4 class="code-header">unsafe fn <a href="#method.try_add_target_to_ai_target_list" class="fnname">try_add_target_to_ai_target_list</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;current_num_targets: i32,<br>&nbsp;&nbsp;&nbsp;&nbsp;move_ai_range: <a class="struct" href="../moves/struct.MoveTargetAndRange.html" title="struct eos_rs::api::moves::MoveTargetAndRange">MoveTargetAndRange</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;target: &amp;<a class="type" href="type.DungeonEntity.html" title="type eos_rs::api::dungeon_mode::DungeonEntity">DungeonEntity</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;the_move: &amp;<a class="type" href="../moves/type.Move.html" title="type eos_rs::api::moves::Move">Move</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;check_all_conditions: bool<br>) -&gt; i32</h4></section></summary><div class="docblock"><p>Checks if the specified target is eligible to be targeted by the AI and if so adds it to
the list of targets. This function also fills an array that seems to contain the directions
in which the user should turn to look at each of the targets in the list, as well as a
third unknown array.</p>
<p>If <code>check_all_conditions</code> is <code>true</code> check all the possible <a href="../moves/enum.MoveAiCondition.html" title="MoveAiCondition"><code>MoveAiCondition</code></a> values,
false to only check for <a href="../moves/enum.MoveAiCondition.html#variant.Random" title="MoveAiCondition::Random"><code>MoveAiCondition::Random</code></a> (if the move has a different
ai condition, the result will be <code>false</code>).</p>
<p>Panics if any field in the <code>MoveTargetAndRange</code> is None or the conversion into the ffi
type fails for any other reason.</p>
<p>Returns the new length of the AI target list.</p>
<h5 id="safety-4"><a href="#safety-4">Safety</a></h5>
<p>The length of the target list must be correct.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.update_status_icon_flags" class="method has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#926-928">source</a><h4 class="code-header">fn <a href="#method.update_status_icon_flags" class="fnname">update_status_icon_flags</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Sets the monster’s status_icon_flags bitfield according to its current status effects.
Does not affect a Sudowoodo in the “permanent sleep” state
(<a href="../../ffi/struct.statuses.html#structfield.sleep" title="ffi::statuses::sleep"><code>ffi::statuses::sleep</code></a> == 0x7F).</p>
<p>Some of the status effect in monster:statuses are used as an index to access an array,
where every group of 8 bytes represents a bitmask. All masks are added in a bitwise OR and
then stored in <a href="../../ffi/struct.monster.html#structfield.status_icons" title="ffi::monster::status_icons"><code>ffi::monster::status_icons</code></a>.</p>
<p>Also sets icon flags for <a href="../../ffi/struct.statuses.html#structfield.exposed" title="ffi::statuses::exposed"><code>ffi::statuses::exposed</code></a>, <a href="../../ffi/struct.statuses.html#structfield.grudge" title="ffi::statuses::grudge"><code>ffi::statuses::grudge</code></a>,
critical HP and lowered stats with explicit checks, and applies the effect of the
Identifier Orb (see <a href="../../ffi/struct.dungeon.html#structfield.identify_orb_flag" title="ffi::dungeon::identify_orb_flag"><code>ffi::dungeon::identify_orb_flag</code></a>).</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"><section id="impl-DungeonMonsterWrite-for-DungeonMonsterMut%3C%27a%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/eos_rs/api/dungeon_mode/monster.rs.html#951-959">source</a><a href="#impl-DungeonMonsterWrite-for-DungeonMonsterMut%3C%27a%3E" class="anchor"></a><h3 class="code-header">impl&lt;'a&gt; <a class="trait" href="trait.DungeonMonsterWrite.html" title="trait eos_rs::api::dungeon_mode::DungeonMonsterWrite">DungeonMonsterWrite</a> for <a class="struct" href="struct.DungeonMonsterMut.html" title="struct eos_rs::api::dungeon_mode::DungeonMonsterMut">DungeonMonsterMut</a>&lt;'a&gt;</h3></section></div><script src="../../../implementors/eos_rs/api/dungeon_mode/monster/trait.DungeonMonsterWrite.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="eos_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (b833ad56f 2022-11-18)" data-search-js="search-df80cc3cb87b6482.js" data-settings-js="settings-7e1cf5cc683233f7.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>